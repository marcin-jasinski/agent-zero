# Agent Zero (L.A.B.) Environment Configuration
# Copy this file to .env and fill in the required values

# ============================================================================
# Application Settings
# ============================================================================
# APP_ENV: Environment mode (development|staging|production)
# - development: Optional guards, debug allowed, local tracing
# - staging: Guards required (LLM Guard + Langfuse), no debug recommended
# - production: Strict enforcement, all guards required, no debug
APP_ENV=development

APP_DEBUG=true
APP_HOST=0.0.0.0
APP_PORT=8501

# Logging configuration
# - development: DEBUG or INFO recommended
# - staging/production: INFO, WARNING, or ERROR only (no DEBUG)
APP_LOG_LEVEL=INFO
APP_LOG_FORMAT=json

# ============================================================================
# Ollama Configuration (LLM & Embeddings)
# ============================================================================
OLLAMA_HOST=http://ollama:11434
# LLM model — change to any model available on your Ollama instance
OLLAMA_MODEL=qwen3:4b
# Embedding model — must produce 768-dim vectors; change if you use a different model
OLLAMA_EMBED_MODEL=nomic-embed-text:latest
# Enable chain-of-thought reasoning (thinking models: qwen3, deepseek-r1, qwq…).
# Non-thinking models silently ignore this flag — safe to leave true for any model.
OLLAMA_THINKING=true

# ============================================================================
# Qdrant Configuration (Vector Database)
# ============================================================================
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=documents

# ============================================================================
# Meilisearch Configuration (Keyword Search)
# ============================================================================
MEILISEARCH_HOST=http://meilisearch:7700
MEILISEARCH_API_KEY=meilisearch-master-key-changeme-min16chars
MEILISEARCH_INDEX_NAME=documents

# ============================================================================
# PostgreSQL Configuration (Langfuse backing)
# ============================================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=langfuse
POSTGRES_USER=langfuse
POSTGRES_PASSWORD=changeme123

# ============================================================================
# Langfuse Configuration (Observability & Monitoring)
# ============================================================================
# Langfuse requirements by environment:
# - development: Optional (LANGFUSE_ENABLED=false for faster local testing)
# - staging: REQUIRED (LANGFUSE_ENABLED=true + valid credentials)
# - production: REQUIRED (full observability required)
LANGFUSE_HOST=http://langfuse:3000
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_ENABLED=true

# ============================================================================
# Security & LLM Guard
# ============================================================================
# IMPORTANT: Use nested delimiter format for SecurityConfig fields:
# APP_SECURITY__LLM_GUARD_ENABLED instead of LLM_GUARD_ENABLED
#
# Security requirements by environment:
# - development: Optional (can be disabled for faster iteration)
# - staging: REQUIRED (APP_SECURITY__LLM_GUARD_ENABLED=true + LANGFUSE_ENABLED=true)
# - production: REQUIRED (both guards must be enabled)
#
# For nested configuration fields, use double underscore (__) separator:
APP_SECURITY__LLM_GUARD_ENABLED=false
APP_SECURITY__INPUT_SCAN=true
APP_SECURITY__OUTPUT_SCAN=true
APP_SECURITY__MAX_INPUT_LENGTH=10000
APP_SECURITY__MAX_OUTPUT_LENGTH=5000

# ============================================================================
# Logging
# ============================================================================
# Moved to Application Settings section above (APP_LOG_LEVEL, APP_LOG_FORMAT)
# Environment-specific logging requirements:
# - development: DEBUG or INFO allowed
# - staging: INFO, WARNING, or ERROR (DEBUG not recommended)
# - production: INFO, WARNING, or ERROR only (DEBUG strictly forbidden)

# ============================================================================
# Dashboard Features (Phase 4b - Management Tools)
# ============================================================================
# Control visibility of management dashboard tools
# Core tools (Chat, Knowledge Base, Settings, Logs) are always enabled
#
# Management tools (feature-flagged):
APP_DASHBOARD__SHOW_QDRANT_MANAGER=false        # Qdrant vector DB management
APP_DASHBOARD__SHOW_LANGFUSE_DASHBOARD=false    # Langfuse observability traces
APP_DASHBOARD__SHOW_PROMPTFOO=false              # Promptfoo prompt testing & versioning
APP_DASHBOARD__SHOW_SYSTEM_HEALTH=false          # System health monitoring

# ============================================================================
# GPU ACCELERATION - CROSS-PLATFORM SUPPORT
# ============================================================================
#
# Agent Zero automatically detects and uses NVIDIA GPU if available.
# No manual configuration needed!
#
# PLATFORM-SPECIFIC NOTES:
#
# ✅ Windows with WSL 2 + NVIDIA GPU:
#    - Install NVIDIA drivers for WSL 2
#    - Run: make start (auto-detect) or make start-gpu (force GPU)
#    - GPU acceleration will be enabled automatically
#
# ✅ Linux with NVIDIA GPU:
#    - Install NVIDIA Docker runtime
#    - Run: make start (auto-detect) or make start-gpu (force GPU)
#    - GPU acceleration will be enabled automatically
#
# ❌ macOS Intel:
#    - NVIDIA CUDA is NOT supported
#    - GPU acceleration will be disabled (CPU-only mode)
#    - Run: make start (CPU-only)
#    - CPU performance is very capable
#
# ✅ macOS Apple Silicon (M1/M2/M3/M4):
#    - NVIDIA CUDA is NOT supported
#    - Metal GPU acceleration is available for integrated GPU
#    - Unified memory architecture is excellent for AI workloads
#    - Run: make start (will use Metal GPU acceleration if available)
#    - Both CPU and GPU paths are highly optimized
#
# ❌ Linux without NVIDIA GPU/drivers:
#    - GPU acceleration will be disabled automatically
#    - Run: make start (CPU-only)
#
# MANUAL OVERRIDE:
#    make start-gpu    # Force GPU (fails gracefully if no GPU)
#    make start-cpu    # Force CPU-only mode
#    make start        # Auto-detect (recommended)
#
# ============================================================================

